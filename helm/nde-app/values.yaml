# Workload type and replicas
workload:
  type: deployment  # or "statefulset"
  replicas: 1

# Container(s) - supports multi-container pods
containers:
  - name: app
    image:
      repository: ""  # Required
      tag: latest
    port: 80
    env: []
    volumeMounts: []
    resources:
      requests:
        cpu: 100m
        memory: 128Mi
      limits:
        cpu: 500m
        memory: 512Mi
    livenessProbe:
      httpGet:
        path: /
      initialDelaySeconds: 30
      periodSeconds: 10
    readinessProbe:
      httpGet:
        path: /
      initialDelaySeconds: 5
      periodSeconds: 5

    # Flux image automation (generates ImageRepository + ImagePolicy)
    # Enabled by default. Set flux.enabled: false to disable.
    # Interval defaults to 1m for ghcr.io/netwerk-digitaal-erfgoed images, 24h for external images.
    flux:
      enabled: true
      # interval: 1m  # Override the default interval
      policy:
        type: numerical  # or "semver"
        range: ""  # For semver, e.g. '~1.0' or '^1.0.0'

# Image pull secrets (ghcr.io images auto-add ghcr secret)
imagePullSecrets: []

# Pod security context
securityContext: {}
  # fsGroup: 82

# Service
service:
  port: 80
  targetPort: ""  # Defaults to first container's port

# Ingress - shared annotations for first ingress
ingress:
  annotations:
    cert-manager.io/issuer: harica-nde
    cert-manager.io/usages: server auth,digital signature,client auth

# Ingresses - first one gets TLS auto-configured and shared annotations
ingresses: []
  # - hosts:
  #     - app.example.com
  #   # Optional overrides:
  #   # name: custom-name        # Defaults to release name for first, required for others
  #   # annotations: {}          # Merged with ingress.annotations for first ingress
  #   # paths:                   # Defaults to [{path: /, pathType: Prefix}]
  #   #   - path: /api
  #   #     pathType: Prefix
  #   # tls:
  #   #   secretName: custom-tls # Defaults to {name}-tls

# Pod volumes (for ConfigMaps, Secrets, etc.)
volumes: []
  # - name: config
  #   configMap:
  #     name: my-config

# Persistence (StatefulSet only) - single volume
persistence:
  enabled: false
  storageClass: hdd
  size: 1Gi
  name: data
  mountPath: /data

# Multiple persistent volumes (StatefulSet only)
persistentVolumes: []
  # - name: data
  #   size: 50Gi
  #   storageClass: hdd  # optional, defaults to hdd

# PersistentVolumeClaims
pvcs: []
  # - name: data            # Required, used in PVC name (fullname-name)
  #   size: 1Gi             # Required
  #   accessMode: ReadWriteOnce  # Optional, defaults to ReadWriteOnce
  #   storageClass: hdd      # Optional, defaults to hdd

# ConfigMaps
configMaps: []
  # - name: config
  #   data:
  #     config.yaml: |
  #       key: value

# CronJobs
cronjobs: []
  # - name: my-job           # Required, used in CronJob name
  #   schedule: "0 4 * * 6"
  #   image: alpine:latest
  #   imagePullPolicy: ""    # Optional
  #   command: []
  #   args: []
  #   env: []
  #   restartPolicy: OnFailure  # Optional, defaults to OnFailure
